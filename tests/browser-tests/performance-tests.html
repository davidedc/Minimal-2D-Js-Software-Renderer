<!DOCTYPE html>
<html>
<head>
  <title>Performance Tests - Software Canvas vs HTML5 Canvas</title>
  <link rel="stylesheet" href="styles/main.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }
    
    h1, h2, h3 {
      color: #333;
    }
    
    .test-controls {
      margin-bottom: 20px;
      padding: 15px;
      background-color: #f5f5f5;
      border-radius: 5px;
    }
    
    .canvas-container {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
    }
    
    .canvas-wrapper {
      width: 48%;
    }
    
    canvas {
      border: 1px solid #ddd;
      margin-bottom: 10px;
    }
    
    .test-buttons {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }
    
    button {
      padding: 8px 16px;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    
    button:hover {
      background-color: #45a049;
    }
    
    button:disabled {
      background-color: #cccccc;
      cursor: not-allowed;
    }
    
    .results {
      font-family: monospace;
      padding: 15px;
      background-color: #f8f8f8;
      border: 1px solid #ddd;
      border-radius: 4px;
      white-space: pre-wrap;
      overflow-x: auto;
      max-height: 500px;
      overflow-y: auto;
    }
    
    #progress-container {
      width: 100%;
      background-color: #ddd;
      border-radius: 4px;
      margin-top: 10px;
      margin-bottom: 20px;
    }
    
    #progress-bar {
      height: 20px;
      width: 0;
      background-color: #4CAF50;
      border-radius: 4px;
      text-align: center;
      color: white;
      line-height: 20px;
    }
    
    label {
      margin-right: 10px;
    }
    
    .value-display {
      display: inline-block;
      width: 50px;
      text-align: center;
    }
    
    .chart-container {
      width: 100%;
      height: 400px;
      margin-top: 20px;
      margin-bottom: 30px;
      border: 1px solid #ddd;
      background-color: #fff;
    }
  </style>
</head>

<body>
  <h1>Performance Tests - Software Canvas vs HTML5 Canvas</h1>
  
  <div class="test-controls">
    <h2>Test Configuration</h2>
    
    <div>
      <label for="sw-increment-size">SW Canvas increment size:</label>
      <input type="number" id="sw-increment-size" min="1" max="100" value="1" style="width: 60px;">
    </div>
    
    <div>
      <label for="html-increment-size">HTML5 Canvas increment size:</label>
      <input type="number" id="html-increment-size" min="1" max="1000" value="500" style="width: 60px;">
    </div>
    
    <div>
      <label for="consecutive-exceedances">Consecutive budget exceedances:</label>
      <input type="number" id="consecutive-exceedances" min="1" max="20" value="10" style="width: 60px;">
    </div>
    
    <div>
      <label>
        <input type="checkbox" id="include-blitting" checked>
        Include blitting time for Software Canvas
      </label>
    </div>
    
    <div class="test-buttons">
      <button id="btn-lines-test">Run Lines Test</button>
      <button id="btn-rects-test">Run Rectangles Test</button>
      <button id="btn-circles-test">Run Circles Test</button>
      <button id="btn-run-all">Run All Tests</button>
      <button id="btn-abort" disabled>Abort Tests</button>
    </div>
  </div>
  
  <div id="progress-container" style="display: none;">
    <div id="progress-bar">0%</div>
  </div>
  
  <div class="canvas-container">
    <div class="canvas-wrapper">
      <h3>Software Canvas</h3>
      <canvas id="sw-canvas" width="500" height="400"></canvas>
    </div>
    <div class="canvas-wrapper">
      <h3>HTML5 Canvas</h3>
      <canvas id="canvas" width="500" height="400"></canvas>
    </div>
  </div>
  
  <h2>Test Results</h2>
  <div class="results" id="results-container"></div>
  
  <div class="chart-container" id="chart-container"></div>

  <!-- Load library scripts -->
  <script src="../../build/crisp-sw-canvas-v1.0.2.min.js"></script>
  <script src="../../src/scene-creation/SeededRandom.js"></script>
  
  <script>
    // Elements
    const swCanvas = document.getElementById('sw-canvas');
    const canvas = document.getElementById('canvas');
    const resultsContainer = document.getElementById('results-container');
    const progressContainer = document.getElementById('progress-container');
    const progressBar = document.getElementById('progress-bar');
    const chartContainer = document.getElementById('chart-container');
    
    // Canvas contexts
    const swCtx = new CrispSwContext(swCanvas);
    const ctx = canvas.getContext('2d');
    
    // Controls
    const swIncrementSize = document.getElementById('sw-increment-size');
    const htmlIncrementSize = document.getElementById('html-increment-size');
    const consecutiveExceedances = document.getElementById('consecutive-exceedances');
    const includeBlittingCheckbox = document.getElementById('include-blitting');
    
    // Buttons
    const btnLinesTest = document.getElementById('btn-lines-test');
    const btnRectsTest = document.getElementById('btn-rects-test');
    const btnCirclesTest = document.getElementById('btn-circles-test');
    const btnRunAll = document.getElementById('btn-run-all');
    const btnAbort = document.getElementById('btn-abort');
  </script>
  
  <!-- Load test scripts -->
  <script src="performance-tests/lines-test.js"></script>
  <script src="performance-tests/rects-test.js"></script>
  <script src="performance-tests/circles-test.js"></script>
  <script src="performance-tests/performance-utils.js"></script>
  <script src="performance-tests/performance-ui.js"></script>
</body>
</html>